<section id="favorites" class="featured-products">
  <div class="page-width">
    <div class="section-heading">
      <div>
        <p class="eyebrow">{{ section.settings.eyebrow }}</p>
        <h2>{{ section.settings.heading }}</h2>
      </div>
      <a class="text-link" href="{{ section.settings.view_all_link }}">{{ section.settings.view_all_label }}</a>
    </div>

    {% assign collection = collections[section.settings.collection] %}

    <div class="product-grid">
      {% if collection != blank %}
        {% for product in collection.products limit: 4 %}
          <article class="product-card">
            <a href="{{ product.url }}">
              <div class="product-card__image">
                {% if product.featured_image %}
                  <img src="{{ product.featured_image | image_url: width: 600 }}" alt="{{ product.featured_image.alt | escape }}">
                {% else %}
                  <div class="product-card__placeholder"></div>
                {% endif %}
              </div>
              <div class="product-card__info">
                <h3>{{ product.title }}</h3>
                <p>{{ product.vendor }}</p>
                <span>{{ product.price | money }}</span>
              </div>
            </a>
          </article>
        {% endfor %}
      {% else %}
        {% for block in section.blocks %}
          <article class="product-card">
            <div class="product-card__image">
              {% if block.settings.image != blank %}
                <img src="{{ block.settings.image | image_url: width: 600 }}" alt="{{ block.settings.title | escape }}">
              {% else %}
                <div class="product-card__placeholder"></div>
              {% endif %}
            </div>
            <div class="product-card__info">
              <h3>{{ block.settings.title }}</h3>
              <p>{{ block.settings.subtitle }}</p>
              <span>{{ block.settings.price }}</span>
            </div>
          </article>
        {% endfor %}
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Featured products",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow",
      "default": "Favorites"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Four treasures to start your journey."
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "text",
      "id": "view_all_label",
      "label": "View all label",
      "default": "View all"
    },
    {
      "type": "url",
      "id": "view_all_link",
      "label": "View all link",
      "default": "/collections/all"
    }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Handwoven market tote"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle",
          "default": "Limited artisan run"
        },
        {
          "type": "text",
          "id": "price",
          "label": "Price",
          "default": "$86.00"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Featured products",
      "blocks": [
        {
          "type": "product"
        },
        {
          "type": "product",
          "settings": {
            "title": "Florence porcelain vase",
            "subtitle": "Glossed porcelain",
            "price": "$128.00"
          }
        },
        {
          "type": "product",
          "settings": {
            "title": "Desert candle trio",
            "subtitle": "Hand-poured soy",
            "price": "$64.00"
          }
        },
        {
          "type": "product",
          "settings": {
            "title": "Linen travel journal",
            "subtitle": "Embossed cover",
            "price": "$42.00"
          }
        }
      ]
    }
  ]
}
{% endschema %}
